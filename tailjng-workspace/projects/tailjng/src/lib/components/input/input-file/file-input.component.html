<div class="relative w-full select-none">
<input
    #fileInput
    type="file"
    [id]="id"
    [name]="name ?? ''"
    [accept]="accept"
    [multiple]="multiple"
    (change)="onFileSelected($event)"
    [required]="required"
    [disabled]="disabled"
    class="hidden"
    (blur)="onTouched()" 
/>

<label
    [for]="id"
    class="input block text-sm dark:text-gray-400 w-full h-[40px] pr-1 bg-background dark:bg-dark-background border border-border dark:border-dark-border flex items-center justify-between text-black dark:text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary transition duration-200 cursor-pointer">

    <div class="truncate" [ngClass]="{ 'opacity-50' : !innerValue?.name }">
    @if (innerValue?.name) {
        <span>{{ innerValue?.name }}</span>
    } @else {
        <span class="flex items-center gap-2">
        <lucide-icon [name]="iconsService.icons.upload" [size]="15" />
        Seleccionar archivo...
        </span>
    }
    </div>

    @if (value && clearButton) {
    <button type="button" class="text-gray-400 text-gray-400 hover:text-gray-500 pr-1 mr-1 text-gray-400 hover:text-gray-600 focus:outline-none cursor-pointer" (click)="clearFile()">
        <lucide-icon [name]="iconsService.icons.close" class="w-4 h-4" />
    </button>
    }
</label>

@if (previewUrl && showImage) {
    <div class="mt-2 w-full align-center justify-center flex">
    <img [src]="previewUrl" alt="Vista previa"
        [ngStyle]="{
        width: widthImgFile ? widthImgFile + 'px' : '100%',
        height: heightImgFile ? heightImgFile + 'px' : 'auto'
        }"
        class="rounded border border-border dark:border-dark-border shadow-sm object-cover" 
    />
    </div>
}
</div>